{"ast":null,"code":"import _regeneratorRuntime from\"/Users/silleknarf/Code/balance-extractor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/silleknarf/Code/balance-extractor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/silleknarf/Code/balance-extractor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/silleknarf/Code/balance-extractor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/silleknarf/Code/balance-extractor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/silleknarf/Code/balance-extractor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/silleknarf/Code/balance-extractor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={balanceByAccount:{}};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"handleChange\",value:function handleChange(event){var balanceByAccount=this.getBalanceByAccount(event.target.value);console.log(balanceByAccount);this.balanceByAccount=this.setState({balanceByAccount:balanceByAccount});}},{key:\"getBalanceByAccount\",value:function getBalanceByAccount(text){var _this2=this;var lines=text.split('\\n');var balanceRegex=/\\d+\\.\\d+/;var balancesByAccount={};lines.forEach(function(line){var balances=line.match(balanceRegex);var account=_this2.getAccount(line);if(balances){balances.forEach(function(balance){var balanceAmount=parseFloat(balance);if(!balancesByAccount[account]){balancesByAccount[account]=balanceAmount;}else{balancesByAccount[account]+=balanceAmount;}});}});return balancesByAccount;}},{key:\"getAccount\",value:function getAccount(line){var account='unknown';var accounts=['amex','revolut'];accounts.forEach(function(acc){if(line.toLowerCase().includes(acc)){account=acc;}});return account;}},{key:\"copyToClipboard\",value:function(){var _copyToClipboard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(text){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return navigator.clipboard.writeText(text);case 3:console.log('Copied to clipboard');_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.error('Failed to copy: ',_context.t0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));function copyToClipboard(_x){return _copyToClipboard.apply(this,arguments);}return copyToClipboard;}()},{key:\"render\",value:function render(){var _this3=this;var balanceByAccount=Object.keys(this.state.balanceByAccount).map(function(account){var balance=_this3.state.balanceByAccount[account];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Account:\"}),\" \",account,' ']}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Balance:\"}),\" \",balance]}),/*#__PURE__*/_jsx(\"button\",{onclick:_this3.copyToClipboard(balance),children:\"\\uD83D\\uDCCB Copy to clipboard\"})]});});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold',fontSize:'xx-large'},children:\"\\u2696\\uFE0F Balance Extractor\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Copy and paste messages from WhatsApp into the box below. Account balances will be extracted and totalled up.\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",value:this.state.value,onChange:this.handleChange}),balanceByAccount]});}}]);return App;}(React.Component);export{App as default};","map":{"version":3,"sources":["/Users/silleknarf/Code/balance-extractor/src/App.js"],"names":["React","App","props","state","balanceByAccount","handleChange","bind","event","getBalanceByAccount","target","value","console","log","setState","text","lines","split","balanceRegex","balancesByAccount","forEach","line","balances","match","account","getAccount","balance","balanceAmount","parseFloat","accounts","acc","toLowerCase","includes","navigator","clipboard","writeText","error","Object","keys","map","copyToClipboard","fontWeight","fontSize","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './style.css';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      balanceByAccount: {}\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    const balanceByAccount = this.getBalanceByAccount(event.target.value);\n    console.log(balanceByAccount);\n    this.balanceByAccount = this.setState({\n      balanceByAccount: balanceByAccount\n    });\n  }\n\n  getBalanceByAccount(text) {\n    const lines = text.split('\\n');\n    const balanceRegex = /\\d+\\.\\d+/;\n    const balancesByAccount = {};\n    lines.forEach(line => {\n      const balances = line.match(balanceRegex);\n      const account = this.getAccount(line);\n      if (balances) {\n        balances.forEach(balance => {\n          const balanceAmount = parseFloat(balance);\n          if (!balancesByAccount[account]) {\n            balancesByAccount[account] = balanceAmount;\n          } else {\n            balancesByAccount[account] += balanceAmount;\n          }\n        });\n      }\n    });\n    return balancesByAccount;\n  }\n\n  getAccount(line) {\n    let account = 'unknown';\n    const accounts = ['amex', 'revolut'];\n    accounts.forEach(acc => {\n      if (line.toLowerCase().includes(acc)) {\n        account = acc;\n      }\n    });\n    return account;\n  }\n\n  async copyToClipboard(text) {\n    try {\n      await navigator.clipboard.writeText(text);\n      console.log('Copied to clipboard');\n    } catch (err) {\n      console.error('Failed to copy: ', err);\n    }\n  }\n\n  render() {\n    const balanceByAccount = Object.keys(this.state.balanceByAccount).map(\n      account => {\n        let balance = this.state.balanceByAccount[account];\n        return (\n          <div>\n            <span>\n              <b>Account:</b> {account}{' '}\n            </span>\n            <span>\n              <b>Balance:</b> {balance}\n            </span>\n            <button onclick={this.copyToClipboard(balance)}>\n              üìã Copy to clipboard\n            </button>\n          </div>\n        );\n      }\n    );\n    return (\n      <div>\n        <div style={{ fontWeight: 'bold', fontSize: 'xx-large' }}>\n          ‚öñÔ∏è Balance Extractor\n        </div>\n        <div>\n          Copy and paste messages from WhatsApp into the box below. Account\n          balances will be extracted and totalled up.\n        </div>\n        <textarea\n          type=\"text\"\n          value={this.state.value}\n          onChange={this.handleChange}\n        />\n        {balanceByAccount}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}