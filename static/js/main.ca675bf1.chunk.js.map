{"version":3,"sources":["App.js","index.js"],"names":["App","props","state","balanceByAccount","handleChange","bind","event","this","getBalanceByAccount","target","value","console","log","setState","text","lines","split","balanceRegex","balancesByAccount","forEach","line","balances","match","account","getAccount","balance","balanceAmount","parseFloat","acc","toLowerCase","includes","a","navigator","clipboard","writeText","copiedToClipboardText","toast","autoClose","error","Object","keys","map","onClick","copyToClipboard","style","fontWeight","fontSize","type","onChange","React","Component","ReactDOM","render","document","getElementById"],"mappings":"uPAKqBA,E,kDACnB,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAQ,CACXC,iBAAkB,IAGpB,EAAKC,aAAe,EAAKA,aAAaC,KAAlB,gBANH,E,gDASnB,SAAaC,GACX,IAAMH,EAAmBI,KAAKC,oBAAoBF,EAAMG,OAAOC,OAC/DC,QAAQC,IAAIT,GACZI,KAAKJ,iBAAmBI,KAAKM,SAAS,CACpCV,iBAAkBA,M,iCAItB,SAAoBW,GAAO,IAAD,OAClBC,EAAQD,EAAKE,MAAM,MACnBC,EAAe,WACfC,EAAoB,GAe1B,OAdAH,EAAMI,SAAQ,SAAAC,GACZ,IAAMC,EAAWD,EAAKE,MAAML,GACtBM,EAAU,EAAKC,WAAWJ,GAC5BC,GACFA,EAASF,SAAQ,SAAAM,GACf,IAAMC,EAAgBC,WAAWF,GAC5BP,EAAkBK,GAGrBL,EAAkBK,IAAYG,EAF9BR,EAAkBK,GAAWG,QAO9BR,I,wBAGT,SAAWE,GACT,IAAIG,EAAU,UAOd,MANiB,CAAC,OAAQ,WACjBJ,SAAQ,SAAAS,GACXR,EAAKS,cAAcC,SAASF,KAC9BL,EAAUK,MAGPL,I,oEAGT,WAAsBT,GAAtB,eAAAiB,EAAA,+EAEUC,UAAUC,UAAUC,UAAUpB,GAFxC,OAGUqB,EAAwB,sBAC9BxB,QAAQC,IAAIuB,GACZC,YAAMD,EAAuB,CAAEE,UAAW,MAL9C,gDAOI1B,QAAQ2B,MAAM,mBAAd,MAPJ,yD,2EAWA,WAAU,IAAD,OACDnC,EAAmBoC,OAAOC,KAAKjC,KAAKL,MAAMC,kBAAkBsC,KAChE,SAAAlB,GACE,IAAME,EAAU,EAAKvB,MAAMC,iBAAiBoB,GAC5C,OACE,gCACE,iCACE,yCADF,IACmBA,EAAS,OAE5B,iCACE,yCADF,IACmBE,KAEnB,wBAAQiB,QAAS,kBAAM,EAAKC,gBAAgBlB,IAA5C,8CAPQF,MAchB,OACE,gCACE,qBAAKqB,MAAO,CAAEC,WAAY,OAAQC,SAAU,YAA5C,4CAGA,gJAIA,0BACEC,KAAK,OACLrC,MAAOH,KAAKL,MAAMQ,MAClBsC,SAAUzC,KAAKH,eAEhBD,EACD,cAAC,IAAD,W,GA/FyB8C,IAAMC,WCAvCC,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.ca675bf1.chunk.js","sourcesContent":["import React from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './style.css';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      balanceByAccount: {}\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    const balanceByAccount = this.getBalanceByAccount(event.target.value);\n    console.log(balanceByAccount);\n    this.balanceByAccount = this.setState({\n      balanceByAccount: balanceByAccount\n    });\n  }\n\n  getBalanceByAccount(text) {\n    const lines = text.split('\\n');\n    const balanceRegex = /\\d+\\.\\d+/;\n    const balancesByAccount = {};\n    lines.forEach(line => {\n      const balances = line.match(balanceRegex);\n      const account = this.getAccount(line);\n      if (balances) {\n        balances.forEach(balance => {\n          const balanceAmount = parseFloat(balance);\n          if (!balancesByAccount[account]) {\n            balancesByAccount[account] = balanceAmount;\n          } else {\n            balancesByAccount[account] += balanceAmount;\n          }\n        });\n      }\n    });\n    return balancesByAccount;\n  }\n\n  getAccount(line) {\n    let account = 'unknown';\n    const accounts = ['amex', 'revolut'];\n    accounts.forEach(acc => {\n      if (line.toLowerCase().includes(acc)) {\n        account = acc;\n      }\n    });\n    return account;\n  }\n\n  async copyToClipboard(text) {\n    try {\n      await navigator.clipboard.writeText(text);\n      const copiedToClipboardText = \"Copied to clipboard\";\n      console.log(copiedToClipboardText);\n      toast(copiedToClipboardText, { autoClose: 2000 })\n    } catch (err) {\n      console.error('Failed to copy: ', err);\n    }\n  }\n\n  render() {\n    const balanceByAccount = Object.keys(this.state.balanceByAccount).map(\n      account => {\n        const balance = this.state.balanceByAccount[account];\n        return (\n          <div key={account}>\n            <span>\n              <b>Account:</b> {account}{' '}\n            </span>\n            <span>\n              <b>Balance:</b> {balance}\n            </span>\n            <button onClick={() => this.copyToClipboard(balance)}>\n              üìã Copy to clipboard\n            </button>\n          </div>\n        );\n      }\n    );\n    return (\n      <div>\n        <div style={{ fontWeight: 'bold', fontSize: 'xx-large' }}>\n          ‚öñÔ∏è Balance Extractor\n        </div>\n        <div>\n          Copy and paste messages from WhatsApp into the box below. Account\n          balances will be extracted and totalled up.\n        </div>\n        <textarea\n          type=\"text\"\n          value={this.state.value}\n          onChange={this.handleChange}\n        />\n        {balanceByAccount}\n        <ToastContainer />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}