(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{18:function(e,n,t){},20:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t.n(c),o=t(2),r=t.n(o),u=t(5),l=t.n(u),i=t(7),s=t(8),b=t(9),h=t(3),d=t(11),p=t(10),v=t(6),f=(t(17),t(18),t(1)),j=function(e){Object(d.a)(t,e);var n=Object(p.a)(t);function t(e){var c;return Object(s.a)(this,t),(c=n.call(this,e)).state={balanceByAccount:{}},c.handleChange=c.handleChange.bind(Object(h.a)(c)),c}return Object(b.a)(t,[{key:"handleChange",value:function(e){var n=this.getBalanceByAccount(e.target.value);console.log(n),this.balanceByAccount=this.setState({balanceByAccount:n})}},{key:"getBalanceByAccount",value:function(e){var n=this,t=e.split("\n").map((function(e){return{account:n.getAccount(e),balanceInPence:n.getBalanceInPence(e)}}));this.enrichAccountUsingNextAccount(t);var c=this.getBalanceInPenceByAccount(t),a={};return Object.keys(c).forEach((function(e){a[e]=c[e]/100})),a}},{key:"getBalanceInPenceByAccount",value:function(e){var n={};return e.forEach((function(e){0!==e.balanceInPence&&(n[e.account]?n[e.account]+=e.balanceInPence:n[e.account]=e.balanceInPence)})),n}},{key:"getAccount",value:function(e){var n=null;return["amex","revolut"].forEach((function(t){e.toLowerCase().includes(t)&&(n=t)})),n}},{key:"getBalanceInPence",value:function(e){var n=e.match(/\xa3(\d+)\.?(\d+)?/),t=0;return n?(n[1]&&(t+=parseInt(100*n[1])),n[2]&&(1===n[2].length?t+=parseInt(10*n[2]):2===n[2].length&&(t+=parseInt(n[2]))),t):t}},{key:"enrichAccountUsingNextAccount",value:function(e){for(var n=0;n<e.length;n++){var t=e[n];if(!t.account){var c=e.slice(n+1).filter((function(e){return e.account})).map((function(e){return e.account}))[0];t.account=c||"unknown"}}}},{key:"copyToClipboard",value:function(){var e=Object(i.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(n);case 3:t="Copied to clipboard",console.log(t),Object(v.b)(t,{autoClose:2e3}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Failed to copy: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,n=Object.keys(this.state.balanceByAccount).map((function(n){var t=e.state.balanceByAccount[n];return Object(f.jsxs)("div",{children:[Object(f.jsxs)("span",{children:[Object(f.jsx)("b",{children:"Account:"})," ",n," "]}),Object(f.jsxs)("span",{children:[Object(f.jsx)("b",{children:"Balance:"})," ",t]}),Object(f.jsx)("button",{onClick:function(){return e.copyToClipboard(t)},children:"\ud83d\udccb Copy to clipboard"})]},n)}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{style:{fontWeight:"bold",fontSize:"xx-large"},children:"\u2696\ufe0f Balance Extractor"}),Object(f.jsx)("div",{children:"Copy and paste messages from WhatsApp into the box below. Account balances will be extracted and totalled up."}),Object(f.jsx)("textarea",{type:"text",value:this.state.value,onChange:this.handleChange}),n,Object(f.jsx)(v.a,{})]})}}]),t}(a.a.Component);r.a.render(Object(f.jsx)(j,{}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.7711146e.chunk.js.map